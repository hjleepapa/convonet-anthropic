{% extends "base.html" %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header Section -->
    <section class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">Syfw To-Do AI Assistant</h1>
                <p class="text-xl text-gray-600 mb-8">AI Voice agentic solution integrated with Synthflow.ai</p>
                <div class="flex justify-center space-x-4">
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">Flask</span>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">SQLAlchemy</span>
                    <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">Pydantic</span>
                    <span class="bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-sm font-medium">Synthflow.ai</span>
                    <span class="bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium">Google Calendar</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Technical Architecture Section -->
    <section class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Technical Architecture</h2>
            <!-- Overview -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">Overview</h3>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <p class="text-gray-700 mb-4">
                        Synthflow is a leading AI voice solution in today’s market. 
                        The Syfw To-Do AI Assistant is a Flask-based REST API designed to handle task management, reminders, and calendar events. 
                        It integrates seamlessly with Synthflow.ai voice agents using standardized tool call interfaces and custom actions.
                        All data is stored in a PostgreSQL database and synchronized in real time with the user’s Google Calendar and Gmail through the Google Calendar API, 
                        enabling a unified and responsive experience across platforms.
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-2">Core Technologies</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>• Flask (Python web framework)</li>
                                <li>• SQLAlchemy with shared database instance</li>
                                <li>• Pydantic models for request/response validation</li>
                                <li>• Blueprint architecture for modular design</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-2">Key Features</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>• To-do list management</li>
                                <li>• Reminder system</li>
                                <li>• Calendar event management</li>
                                <li>• Google Calendar integration</li>
                                <li>• Voice API integration (Synthflow.ai)</li>
                                <li>• RESTful API endpoints</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            
            


            <!-- Module Structure -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">Module Structure</h3>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-3">Shared Components</h4>
                            <div class="font-mono text-sm overflow-x-auto">
                                <pre>shared/
├── google_calendar.py  # Google Calendar integration service
├── helpers.py          # Shared utility functions and request parsing
└── schemas.py          # Pydantic validation schemas</pre>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-3">Syfw Todo Components</h4>
                            <div class="font-mono text-sm overflow-x-auto">
                                <pre>syfw_todo/
├── __init__.py      # Package initialization, exports blueprint
├── models.py        # SQLAlchemy database models
├── routes.py        # Flask routes and blueprint definition
└── README_syfw      # Documentation</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Layer -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">Data Layer (models.py)</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">SyfwTodo Model</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• id: Primary key</li>
                            <li>• title: Task title (indexed)</li>
                            <li>• description: Optional task details</li>
                            <li>• completed: Boolean status</li>
                            <li>• google_calendar_event_id</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">SyfwReminder Model</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• id: Primary key</li>
                            <li>• reminder_text: Reminder content</li>
                            <li>• importance: Priority level</li>
                            <li>• google_calendar_event_id</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">SyfwCalendarEvent Model</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• id: Primary key</li>
                            <li>• title: Event title (indexed)</li>
                            <li>• description: Event details</li>
                            <li>• event_from: Start datetime</li>
                            <li>• event_to: End datetime</li>
                            <li>• google_calendar_event_id</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- API Endpoints -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">API Endpoints</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">To-Do Management</h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/create_todo</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/get_todos</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/complete_todo</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/delete_todo</code></li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">Reminder Management</h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/add_reminder</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/get_reminders</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/delete_reminder</code></li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h4 class="text-lg font-semibold mb-3 text-gray-800">Calendar Management</h4>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/add_calendar_entry</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/get_calendar_entries</code></li>
                            <li><code class="bg-gray-100 px-2 py-1 rounded">POST /syfw_todo/delete_calendar_entry</code></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Google Calendar Integration -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">Google Calendar Integration</h3>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <p class="text-gray-700 mb-4">
                        The SYFW Todo system integrates with Google Calendar to automatically sync calendar events, to-dos, and reminders with the user's Google Calendar account.
                    </p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-2">Authentication</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>• OAuth2 authentication with Google Calendar API</li>
                                <li>• Requires credentials.json from Google Cloud Console</li>
                                <li>• Token-based authentication with automatic refresh</li>
                                <li>• Supports desktop application authentication flow</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded border">
                            <h4 class="font-semibold text-gray-800 mb-2">Features</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>• Automatic event creation in Google Calendar</li>
                                <li>• Real-time synchronization with database</li>
                                <li>• Event updates and deletions</li>
                                <li>• Timezone-aware datetime handling</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded border mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Implementation Details</h4>
                        <div class="text-sm text-gray-600 space-y-2">
                            <p><strong>Service Location:</strong> <code class="bg-gray-100 px-2 py-1 rounded">shared/google_calendar.py</code></p>
                            <p><strong>Main Class:</strong> <code class="bg-gray-100 px-2 py-1 rounded">GoogleCalendarService</code></p>
                            <p><strong>Global Access:</strong> <code class="bg-gray-100 px-2 py-1 rounded">get_calendar_service()</code></p>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded border">
                        <h4 class="font-semibold text-gray-800 mb-2">API Methods</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>• <code class="bg-gray-100 px-2 py-1 rounded">create_event()</code> - Create new calendar event</li>
                            <li>• <code class="bg-gray-100 px-2 py-1 rounded">update_event()</code> - Update existing event</li>
                            <li>• <code class="bg-gray-100 px-2 py-1 rounded">delete_event()</code> - Delete calendar event</li>
                            <li>• <code class="bg-gray-100 px-2 py-1 rounded">get_event()</code> - Retrieve event details</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Response Format -->
            <div class="mb-12">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">Response Format</h3>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <p class="text-gray-700 mb-4">All API responses follow a consistent structure:</p>
                    <div class="bg-white p-4 rounded border">
                        <pre class="text-sm overflow-x-auto"><code>{
  "results": [
    {
      "toolCallId": "string",
      "result": "success" | object | array
    }
  ]
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Synthflow Configuration & Deployment -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Synthflow Configuration & Deployment</h2>
            <div class="space-y-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h4 class="text-lg font-semibold mb-3 text-gray-800">1. Synthflow.ai Setup</h4>
                    <ol class="list-decimal list-inside text-gray-700 space-y-2">
                        <li>Go to <strong>synthflow.ai</strong> and create an account or log in.</li>
                        <li>Go to the Synthflow menu in the left panel and create an agent.</li>
                        <li>Go to Actions menu and create Custom Actions:
                            <ul class="list-disc list-inside ml-6">
                                <li>toDoList: <span class="text-gray-600">createTodo, getTodos, completeTodo, deleteTodo</span></li>
                                <li>reMinder: <span class="text-gray-600">addReminder, getReminder, deleteReminder</span></li>
                                <li>calendar: <span class="text-gray-600">addCalendarEntry, getCalendarEntries, deleteCalendarEntry</span></li>
                            </ul>
                        </li>
                        <li>Configure Agent (General, Voice, Call Configuration):
                            <ul class="list-disc list-inside ml-6">
                                <li>AI Model: GPT 4o or your choice</li>
                                <li>Timezone: US/Pacific</li>
                                <li>Language: English or your preference</li>
                                <li>Voice: Jessica or your preference</li>
                                <li>Enable Recording and Transcripts</li>
                            </ul>
                        </li>
                        <li>Configure Prompt (Greeting, Agent Info, Personality, Role, Goal, Conversation Style, Script Instructions)</li>
                        <li>Configure Actions (assign to Before, During, or After the call as needed)</li>
                        <li>Deployment: Assign a phone number and set up greeting message</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Scenarios -->
    <section class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Test Scenarios</h2>
            <div class="bg-gray-50 p-6 rounded-lg">
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                    <li>Make a call and say "to do list with time and date" to the AI assistant</li>
                    <li>Ask what "to do lists" exist currently and ask to remind the tasks</li>
                    <li>Say that some tasks were completed</li>
                    <li>Say that some tasks were deleted</li>
                    <li>Check whether all test cases have been updated to database tables</li>
                </ol>
            </div>
        </div>
    </section>

    <!-- Test Results -->
    <section class="py-16 bg-gray-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Test Results</h2>
            
            <!-- createTodo Test Results -->
            <div class="mb-12 bg-white p-6 rounded-lg shadow">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">1. createTodo Functionality</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Database Record</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/todo_create_db.png') }}" 
                             alt="Todo Create Database Record" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Google Calendar Integration</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/google_calendar_todo_task.png') }}" 
                             alt="Google Calendar Todo Task" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Audio Demonstration</h4>
                        <audio controls class="w-full rounded-lg shadow-md">
                            <source src="{{ url_for('syfw_todo.static', filename='assets/img/todo_create.wav') }}" type="audio/wav">
                            Your browser does not support the audio tag.
                        </audio>
                    </div>
                </div>
            </div>

            <!-- completeTodo Test Results -->
            <div class="mb-12 bg-white p-6 rounded-lg shadow">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">2. completeTodo Functionality</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Database Record</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/todo_task_completed_db.png') }}" 
                             alt="Todo Task Completed Database Record" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Google Calendar Integration</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/google_calendar_todo_task_completed.png') }}" 
                             alt="Google Calendar Todo Task Completed" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Audio Demonstration</h4>
                        <audio controls class="w-full rounded-lg shadow-md">
                            <source src="{{ url_for('syfw_todo.static', filename='assets/img/todo_set_completed.wav') }}" type="audio/wav">
                            Your browser does not support the audio tag.
                        </audio>
                    </div>
                </div>
            </div>

            <!-- addReminder Test Results -->
            <div class="mb-12 bg-white p-6 rounded-lg shadow">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">3. addReminder Functionality</h3>
                <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                    <p class="text-red-700 text-sm">
                        <strong>Note:</strong> This addReminder function always failed. Not sure about root cause... No further detail logs available to investigate.
                    </p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Database Record</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/add_reminder_db.png') }}" 
                             alt="Add Reminder Database Record" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Google Calendar Integration</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/google_calendar_reminder_issue.png') }}" 
                             alt="Google Calendar Reminder Issue" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Audio Demonstration</h4>
                        <audio controls class="w-full rounded-lg shadow-md">
                            <source src="{{ url_for('syfw_todo.static', filename='assets/img/add_reminder.wav') }}" type="audio/wav">
                            Your browser does not support the audio tag.
                        </audio>
                    </div>
                </div>
            </div>

            <!-- addCalendarEvent Test Results -->
            <div class="mb-12 bg-white p-6 rounded-lg shadow">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">4. addCalendarEvent Functionality</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Database Record</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/calendar_event_created_db.png') }}" 
                             alt="Calendar Events Database Record" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Google Calendar Integration</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/google_calendar_event_created.png') }}" 
                             alt="Google Calendar Event Created" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Audio Demonstration</h4>
                        <audio controls class="w-full rounded-lg shadow-md">
                            <source src="{{ url_for('syfw_todo.static', filename='assets/img/calendar_event_created.wav') }}" type="audio/wav">
                            Your browser does not support the audio tag.
                        </audio>
                    </div>
                </div>
            </div>

            <!-- deleteCalendarEvent Test Results -->
            <div class="mb-12 bg-white p-6 rounded-lg shadow">
                <h3 class="text-2xl font-semibold mb-6 text-gray-800">5. deleteCalendarEvent Functionality</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Database Record</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/calendar_event_deleted_db.png') }}" 
                             alt="Calendar Events Deleted Database Record" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Audio Demonstration</h4>
                        <audio controls class="w-full rounded-lg shadow-md">
                            <source src="{{ url_for('syfw_todo.static', filename='assets/img/calendar_events_deleted.wav') }}" type="audio/wav">
                            Your browser does not support the audio tag.
                        </audio>
                    </div>
                    <div class="space-y-4">
                        <h4 class="text-lg font-semibold text-gray-700">Google Calendar Integration</h4>
                        <img src="{{ url_for('syfw_todo.static', filename='assets/img/google_calendar_event_deleted.png') }}" 
                             alt="Google Calendar Event Deleted" 
                             class="w-full rounded-lg shadow-md">
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}